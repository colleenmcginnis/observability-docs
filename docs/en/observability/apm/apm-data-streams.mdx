---
id: enObservabilityApmDataStreams
slug: /en/observability/apm-data-streams
title: Data streams
description: Description to be written
tags: []
---

import DataStreams from './data-streams/data-streams.mdx'
import LogsDataStreams from './data-streams/logs-data-streams.mdx'
import MetricsDataStreams from './data-streams/metrics-data-streams.mdx'
import TracesDataStreams from './data-streams/traces-data-streams.mdx'

<div id="apm-data-streams"></div>

<DocCallOut>

((agent)) uses data streams to store append-only time series data across multiple indices.
Data streams are well-suited for logs, metrics, traces, and other continuously generated data,
and offer a host of benefits over other indexing strategies:

* Reduced number of fields per index
* More granular data control
* Flexible naming scheme
* Fewer ingest permissions required

See the [((fleet)) and ((agent)) Guide](((fleet-guide))/data-streams.html) to learn more.

</DocCallOut>

<div id="apm-data-streams-naming-scheme"></div>

## Data stream naming scheme

<DataStreams />

<div id="apm-data-streams-list"></div>

## APM data streams

By type, the APM data streams are:

<DocDefList>
  <DocDefTerm>Traces</DocDefTerm>
  <DocDefDescription>
    Traces are comprised of [spans and transactions](((observability-guide))/apm-data-model.html).
    Traces are stored in the following data streams:

    <TracesDataStreams />
  </DocDefDescription>

  <DocDefTerm>Metrics</DocDefTerm>
  <DocDefDescription>
    Metrics include application-based metrics, aggregation metrics, and basic system metrics.
    Metrics are stored in the following data streams:

    <MetricsDataStreams />

    Application metrics include the instrumented service's name--defined in each ((apm-agent))'s
    configuration--in the data stream name.
    Service names therefore must follow certain index naming rules.

    <DocAccordion buttonContent="Service name rules">

    * Service names are case-insensitive and must be unique.
        For example, you cannot have a service named `Foo` and another named `foo`.

    * Special characters will be removed from service names and replaced with underscores (`_`).
        Special characters include:

        ```text
        '\\', '/', '*', '?', '"', '<', '>', '|', ' ', ',', '#', ':', '-'
        ```

    </DocAccordion>
  </DocDefDescription>
  <DocDefTerm>Logs</DocDefTerm>
  <DocDefDescription>
    Logs include application error events and application logs.
    Logs are stored in the following data streams:

    <LogsDataStreams />
  </DocDefDescription>
</DocDefList
>
<div id="apm-data-stream-rerouting"></div>

## APM data stream rerouting

APM supports rerouting APM data to user-defined APM data stream names other than the defaults.
This can be achieved by using a [`reroute` processor](((ref))/reroute-processor.html) in ingest pipelines to set the data stream dataset or namespace.
The benefit of separating APM data streams is that custom retention and security policies can be used.

For example, consider traces that would originally be indexed to `traces-apm-default`. To set the data stream namespace from the trace's `service.environment` and fallback to a static string `"default"`, create an ingest pipeline named `traces-apm@custom` which will be used automatically:

```json
[
  {
    "reroute": {
      "namespace": [
        "{{service.environment}}",
        "default"
      ]
    }
  }
]
```

For more about other ingest pipelines called by default, e.g. `traces-apm@custom`, see [integration data streams ingest pipelines](((fleet-guide))/data-streams.html#data-streams-pipelines).

For more custom APM ingest pipeline guides, see <DocLink id="enObservabilityApmIngestPipelines">parse data using ingest pipelines</DocLink>.

<div id="apm-data-streams-next"></div>

## What's next?

* Data streams define not only how data is stored in ((es)), but also how data is retained over time.
    See <DocLink id="enObservabilityApmIlmHowTo">((ilm-cap))</DocLink> to learn how to create your own data retention policies.

* See <DocLink id="enObservabilityApmManageStorage">Manage storage</DocLink> for information on APM storage and processing costs,
    processing and performance, and other index management features.

