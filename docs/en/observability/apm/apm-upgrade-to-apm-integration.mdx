---
slug: /en/observability/apm-upgrade-to-apm-integration
title: Switch to the Elastic APM integration
description: Description to be written
tags: []
---

<div id="apm-upgrade-to-apm-integration"></div>

The APM integration offers a number of benefits over the standalone method of running APM Server:

**((fleet))**:

* A single, unified way to add monitoring for logs, metrics, traces, and other types of data to each host -- install one thing instead of multiple
* Central, unified configuration management -- no need to edit multiple configuration files

**Data streams**:

{/* lint ignore apm- */}
* Reduced number of fields per index, better space efficiency, and faster queries
* More granular data control
* Errors and metrics data streams are shared with other data sources -- which means better long-term integration with the logs and metrics apps
* Removes template inheritance for ((ilm-init)) policies and makes use of new ((es)) index and component templates
* Fixes `resource \'apm-((version))-$type' exists, but it is not an alias` error

**APM Integration**:

* Easier to install APM on edge machines
* Improved source map handling and ((apm-agent)) configuration management
* Less configuration
* Easier and less error-prone upgrade path
* Zero-downtime configuration changes

<div id="apm-arch-upgrade"></div>

## APM integration architecture

Elastic APM consists of four components: **APM agents**, the **Elastic APM integration**, **((es))**, and **((kib))**.
Generally, there are two ways that these four components can work together:

APM agents on edge machines send data to a centrally hosted APM integration:

[subs=attributes+]
include::./diagrams/apm-architecture-central.asciidoc[Elastic APM architecture with edge APM integrations]

Or, APM agents and the APM integration live on edge machines and enroll via a centrally hosted ((agent)):

[subs=attributes+]
include::./diagrams/apm-architecture-edge.asciidoc[Elastic APM architecture with central APM integration]

<DocCallOut title="Note">
In order to collect data from RUM and mobile agents, which run in browser and mobile applications,
you must run ((agent)) centrally. For other applications, such as backend services,
((agent)) may be co-located on the edge machine.
</DocCallOut>

<div id="apm-integration-upgrade-limitations"></div>

## Limitations

There are some limitations to be aware of:

* This change cannot be reverted
* Currently, only the ((es)) output is supported
* APM runs under ((agent)) which, depending on the installation method, might require root privileges
* An ((agent)) with the APM integration enabled must be managed by ((fleet)).

<div id="make_the_switch"></div>

## Make the switch

Select a guide below to get started.

* <DocLink slug="/en/observability/apm-integration-upgrade-steps">Switch a self-installation to the APM integration</DocLink>
* <DocLink slug="/en/observability/apm-integration-upgrade-steps-ess">Switch an ((ecloud)) cluster to the APM integration</DocLink>

{/* ******************************************************** */}

