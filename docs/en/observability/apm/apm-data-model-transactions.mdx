---
slug: /en/observability/apm-data-model-transactions
title: Transactions
description: Description to be written
tags: []
---

import TracesDataStreams from './data-streams/traces-data-streams.mdx'

<div id="apm-data-model-transactions"></div>

**Transactions** are a special kind of <DocLink slug="/en/observability/apm-data-model-spans">span</DocLink> that have additional attributes associated with them.
They describe an event captured by an Elastic ((apm-agent)) instrumenting a service.
You can think of transactions as the highest level of work youâ€™re measuring within a service.
As an example, a transaction might be a:

* Request to your server
* Batch job
* Background job
* Custom transaction type

Agents decide whether to sample transactions or not,
and provide settings to control sampling behavior.
If sampled, the <DocLink slug="/en/observability/apm-data-model-spans">spans</DocLink> of a transaction are sent and stored as separate documents.
Within one transaction there can be 0, 1, or many spans captured.

A transaction contains:

* The timestamp of the event
* A unique id, type, and name
* Data about the environment in which the event is recorded:
    * Service - environment, framework, language, etc.
    * Host - architecture, hostname, IP, etc.
    * Process - args, PID, PPID, etc.
    * URL - full, domain, port, query, etc.
    * <DocLink slug="/en/observability/apm-data-model-metadata" section="user-context">User</DocLink> - (if supplied) email, ID, username, etc.
* Other relevant information depending on the agent. Example: The JavaScript RUM agent captures transaction marks,
    which are points in time relative to the start of the transaction with some label.

In addition, agents provide options for users to capture custom <DocLink slug="/en/observability/apm-data-model-metadata">metadata</DocLink>.
Metadata can be indexed - <DocLink slug="/en/observability/apm-data-model-metadata" section="labels">`labels`</DocLink>, or not-indexed - <DocLink slug="/en/observability/apm-data-model-metadata" section="custom-context">`custom`</DocLink>.

Transactions are grouped by their `type` and `name` in the APM UI's
[Transaction overview](((kibana-ref))/transactions.html).
If you're using a supported framework, APM agents will automatically handle the naming for you.
If you're not, or if you wish to override the default,
all agents have API methods to manually set the `type` and `name`.

* `type` should be a keyword of specific relevance in the service's domain,
    e.g. `request`, `backgroundjob`, etc.

* `name` should be a generic designation of a transaction in the scope of a single service,
    e.g. `GET /users/:id`, `UsersController#show`, etc.

<DocCallOut title="Tip">
Most agents limit keyword fields (e.g. `labels`) to 1024 characters,
non-keyword fields (e.g. `span.db.statement`) to 10,000 characters.
</DocCallOut>

<div id="data_streams"></div>

## Data streams

Transactions are stored with spans in the following data streams:

<TracesDataStreams />

See <DocLink slug="/en/observability/apm-data-streams">Data streams</DocLink> to learn more.

<div id="example_transaction_document"></div>

## Example transaction document

This example shows what transaction documents can look like when indexed in ((es)).

<DocAccordion buttonContent="Expand ((es)) document">

```json
include::\(\(apm-server-root))/docs/data/elasticsearch/generated/transactions.json[]
```

</DocAccordion>

