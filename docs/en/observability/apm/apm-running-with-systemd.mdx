---
slug: /en/observability/apm-running-with-systemd
title: APM Server and systemd
description: Description to be written
tags: []
---

import ConfigOwnership from './apm-config-file-ownership.mdx'

<div id="apm-running-with-systemd"></div>

<DocCallOut title="Important" color="warning">
These commands only apply to the APM Server binary installation method.
Fleet-managed users should see [Start and stop ((agent))s on edge hosts](((fleet-guide))/start-stop-elastic-agent.html).
</DocCallOut>

The DEB and RPM packages include a service unit for Linux systems with
systemd. On these systems, you can manage APM Server by using the usual
systemd commands.

We recommend that the apm-server process is run as a non-root user.
Therefore, that is the default setup for APM Server's DEB package and RPM installation.

<div id="start_and_stop_apm_server"></div>

## Start and stop APM Server

Use `systemctl` to start or stop APM Server:

```sh
sudo systemctl start apm-server
```

```sh
sudo systemctl stop apm-server
```

By default, the APM Server service starts automatically when the system
boots. To enable or disable auto start use:

```sh
sudo systemctl enable apm-server
```

```sh
sudo systemctl disable apm-server
```

<div id="apm_server_status_and_logs"></div>

## APM Server status and logs

To get the service status, use `systemctl`:

```sh
systemctl status apm-server
```

Logs are stored by default in journald. To view the Logs, use `journalctl`:

```sh
journalctl -u apm-server.service
```

<div id="customize_systemd_unit_for_apm_server"></div>

# Customize systemd unit for APM Server

The systemd service unit file includes environment variables that you can
override to change the default options.

{/* lint ignore usr */}
{/* [cols="<h,<,<m",options="header",] */}
| Variable | Description | Default value  |
|---|---|---|
| `BEAT_LOG_OPTS` | Log options |  |
| `BEAT_CONFIG_OPTS` | Flags for configuration file path | `-c /etc/apm-server/apm-server.yml` |
| `BEAT_PATH_OPTS` | Other paths | `-path.home /usr/share/apm-server -path.config /etc/apm-server -path.data /var/lib/apm-server -path.logs /var/log/apm-server` |

<DocCallOut title="Note">
You can use `BEAT_LOG_OPTS` to set debug selectors for logging. However,
to configure logging behavior, set the logging options described in
<DocLink slug="/en/observability/apm-configuration-logging">Configure logging</DocLink>.
</DocCallOut>

To override these variables, create a drop-in unit file in the
`/etc/systemd/system/apm-server.service.d` directory.

For example a file with the following content placed in
`/etc/systemd/system/apm-server.service.d/debug.conf`
would override `BEAT_LOG_OPTS` to enable debug for ((es)) output.

```systemd
[Service]
Environment="BEAT_LOG_OPTS=-d elasticsearch"
```

To apply your changes, reload the systemd configuration and restart
the service:

```sh
systemctl daemon-reload
systemctl restart apm-server
```

<DocCallOut title="Note">
It is recommended that you use a configuration management tool to
include drop-in unit files. If you need to add a drop-in manually, use
`systemctl edit apm-server.service`.
</DocCallOut>

<ConfigOwnership />
