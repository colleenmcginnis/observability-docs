---
id: enObservabilityApmSecretToken
slug: /en/observability/apm-secret-token
title: Secret token
description: Description to be written
tags: []
---

import SecretTokenWidget from './tab-widgets/secret-token-widget.mdx'

<div id="apm-secret-token"></div>

<DocCallOut title="Important" color="warning">
Secret tokens are sent as plain-text,
so they only provide security when used in combination with <DocLink id="enObservabilityApmAgentTls">TLS</DocLink>.
</DocCallOut>

When defined, secret tokens are used to authorize requests to the APM Server.
Both the ((apm-agent)) and APM Server must be configured with the same secret token for the request to be accepted.

To secure the communication between APM agents and the APM Server with a secret token:

1. Make sure <DocLink id="enObservabilityApmAgentTls">TLS</DocLink> is enabled
1. <DocLink id="enObservabilityApmSecretToken" section="create-a-secret-token">Create a secret token</DocLink>
1. <DocLink id="enObservabilityApmSecretToken" section="configure-the-secret-token-in-your-apm-agents">Configure the secret token in your APM agents</DocLink>

<DocCallOut title="Note">
Secret tokens are not applicable for the RUM Agent,
as there is no way to prevent them from being publicly exposed.
</DocCallOut>

<div id="apm-create-secret-token"></div>

## Create a secret token

{/* lint ignore fleet */}
<DocCallOut title="Note">
((ess)) and ((ece)) deployments provision a secret token when the deployment is created.
The secret token can be found and reset in the ((ecloud)) console under **Deployments** -- **APM & Fleet**.
</DocCallOut>

<SecretTokenWidget />

<div id="apm-configure-secret-token"></div>

## Configure the secret token in your APM agents

Each Elastic ((apm-agent)) has a configuration option to set the value of the secret token:

* **Android agent**: [`secretToken`](((apm-android-ref))/configuration.html)
* **Go agent**: [`ELASTIC_APM_SECRET_TOKEN`](((apm-go-ref))/configuration.html#config-secret-token)
* **iOS agent**: [`secretToken`](((apm-ios-ref-v))/configuration.html#secretToken)
* **Java agent**: [`secret_token`](((apm-java-ref))/config-reporter.html#config-secret-token)
* **.NET agent**: [`ELASTIC_APM_SECRET_TOKEN`](((apm-dotnet-ref))/config-reporter.html#config-secret-token)
* **Node.js agent**: [`Secret Token`](((apm-node-ref))/configuration.html#secret-token)
* **PHP agent**: [`secret_token`](((apm-php-ref-v))/configuration-reference.html#config-secret-token)
* **Python agent**: [`secret_token`](((apm-py-ref))/configuration.html#config-secret-token)
* **Ruby agent**: [`secret_token`](((apm-ruby-ref))/configuration.html#config-secret-token)

In addition to setting the secret token, ensure the configured server URL uses `HTTPS` instead of `HTTP`:

* **Go agent**: [`ELASTIC_APM_SERVER_URL`](((apm-go-ref))/configuration.html#config-server-url)
* **Java agent**: [`server_urls`](((apm-java-ref))/config-reporter.html#config-server-urls)
* **.NET agent**: [`ServerUrl`](((apm-dotnet-ref))/config-reporter.html#config-server-url)
* **Node.js agent**: [`serverUrl`](((apm-node-ref))/configuration.html#server-url)
* **PHP agent**: [`server_url`](((apm-php-ref-v))/configuration-reference.html#config-server-url)
* **Python agent**: [`server_url`](((apm-py-ref))/)
* **Ruby agent**: [`server_url`](((apm-ruby-ref))/configuration.html#config-server-url)

