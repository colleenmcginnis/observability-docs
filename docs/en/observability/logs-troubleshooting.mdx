---
id: enObservabilityLogsTroubleshooting
slug: /en/observability/logs-troubleshooting
title: Troubleshoot logs
description: Description to be written
tags: []
---

<div id="logs-troubleshooting"></div>

This section provides possible solutions for errors you might encounter while onboarding your logs.

<div id="logs-troubleshooting-insufficient-priv"></div>

## User does not have permissions to create API key

If you don't have the required privileges to create an API key, you'll see the following error message:

```plaintext
User does not have permissions to create API key.

Required cluster privileges are [`monitor`, `manage_own_api_key`] and
required index privileges are [`auto_configure`, `create_doc`] for
indices [`logs-*-*`, `metrics-*-*`], please add all required privileges
to the role of the authenticated user.
```

<div id="logs-troubleshooting-insufficient-priv-solution"></div>

### Solution

You need to either:

* Have an administrator give you the `monitor` and `manage_own_api_key` cluster privileges and the `auto_configure` and `create_doc` indices privileges. Once you have these privileges, restart the onboarding flow.
* Get an API key from an administrator and manually add the API to the ((agent)) configuration. See <DocLink id="enObservabilityLogsStream" section="step-3-configure-the-((agent))">Configure the ((agent))</DocLink> for more on manually updating the configuration and adding the API key.

<div id="logs-troubleshooting-API-key-failed"></div>

## Failed to create API key

If you don't have the privileges to create `savedObjects` in ((kib)), you'll see the following error message:

```plaintext
Failed to create API key

Something went wrong: Unable to create observability-onboarding-state
```

<div id="logs-troubleshooting-API-key-failed-solution"></div>

### Solution

You need an administrator to give you the `Saved Objects Management` ((kib)) privilege to generate the required `observability-onboarding-state` flow state.
Once you have the necessary privileges, restart the onboarding flow.

<div id="logs-troubleshooting-kib-not-accessible"></div>

## ((kib)) not accessible from host

If ((kib)) is not accessible from the host, you'll see the following error message after pasting the **Install the ((agent))** instructions into the host:

```plaintext
Failed to connect to {host} port {port} after 0 ms: Connection refused
```

<div id="logs-troubleshooting-kib-not-accessible-solution"></div>

### Solution

The host needs access to ((kib)). Port `443` must be open and the deployment's ((es)) endpoint must be reachable. Locate your project's endpoint from **Help menu (<DocImage flatImage alt="" url="images/help-icon.png" />) â†’ Connection details**.

Run the following command, replacing the URL with your endpoint, and you should get an authentication error with more details on resolving your issue:

```shell
curl https://your-endpoint.elastic.cloud
```

<div id="logs-troubleshooting-download-agent"></div>

## Download ((agent)) failed

If the host was able to download the installation script but cannot connect to the public artifact repository, you'll see the following error message:

```plaintext
Download Elastic Agent

Failed to download Elastic Agent, see script for error.
```

<div id="logs-troubleshooting-download-agent-solution"></div>

### Solutions

* If the combination of the ((agent)) version and operating system architecture is not available, you'll see the following error message:

    ```plaintext
    The requested URL returned error: 404
    ```

    To fix this, update the ((agent)) version in the installation instructions to a known version of the ((agent)).

* If the ((agent)) was fully downloaded previously, you'll see the following error message:

    ```plaintext
    Error: cannot perform installation as Elastic Agent is already running from this directory
    ```

    To fix this, delete previous downloads and restart the onboarding.

* You're an Elastic Cloud Enterprise user without access to the Elastic downloads page.

<div id="logs-troubleshooting-install-agent"></div>

## Install ((agent)) failed

If an ((agent)) already exists on your host, you'll see the following error message:

```plaintext
Install Elastic Agent

Failed to install Elastic Agent, see script for error.
```

<div id="logs-troubleshooting-install-agent-solution"></div>

### Solution
You can uninstall the current ((agent)) using the `elastic-agent uninstall` command, and run the script again.

<DocCallOut title="Warning" color="warning">
Uninstalling the current ((agent)) removes the entire current setup, including the existing configuration.
</DocCallOut>

<div id="logs-troubleshooting-wait-for-logs"></div>

## Waiting for Logs to be shipped... step never completes

If the **Waiting for Logs to be shipped...** step never completes, logs are not being shipped to ((es)), and there is most likely an issue with your ((agent)) configuration.

<div id="logs-troubleshooting-wait-for-logs-solution"></div>

### Solution

Inspect the ((agent)) logs for errors. See the [Debug standalone ((agent))s](((fleet-guide))/debug-standalone-agents.html#inspect-standalone-agent-logs) documentation for more on finding errors in ((agent)) logs.